var write_us = document.querySelector(".letter-link"), popup_letter = document.querySelector(".letter"), close_letter = popup_letter.querySelector(".close-modal-btn"), user_name = popup_letter.querySelector("[name=username]"), form = popup_letter.querySelector("form"), user_mail = popup_letter.querySelector("[name=usermail]"), text = popup_letter.querySelector("[name=usertext]"), is_storage_support = !0, storage_name = "", storage_mail = ""; try { storage_name = localStorage.getItem("username"), storage_mail = localStorage.getItem("usermail") } catch (e) { is_storage_support = !1 } write_us.addEventListener("click", function (e) { e.preventDefault(), popup_letter.classList.add("modal-show"), storage_name && storage_mail ? (user_name.value = storage_name, user_mail.value = storage_mail, text.focus()) : !storage_name && storage_mail ? (user_mail.value = storage_mail, user_name.focus()) : storage_name && !storage_mail && user_mail.focus() }), close_letter.addEventListener("click", function (e) { e.preventDefault(), popup_letter.classList.remove("modal-show"), popup_letter.classList.remove("modal-error") }), form.addEventListener("submit", function (e) { user_name.value && user_mail.value && text.value ? (is_storage_support && (localStorage.setItem("username", user_name.value), localStorage.setItem("usermail", user_mail.value)), form.submit()) : (e.preventDefault(), popup_letter.classList.remove("modal-error"), popup_letter.offsetWidth = popup_letter.offsetWidth, popup_letter.classList.add("modal-error"), console.log("Введите имя и адрес")) }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && (e.preventDefault(), popup_letter.classList.contains("modal-show") && (popup_letter.classList.remove("modal-show"), popup_letter.classList.remove("modal-error"))) }); var map_link = document.querySelector(".map-link"), map = document.querySelector(".map"), close_map = map.querySelector(".close-modal-btn"); map_link.addEventListener("click", function (e) { e.preventDefault(), map.classList.add("modal-show") }), close_map.addEventListener("click", function (e) { e.preventDefault(), map.classList.remove("modal-show") }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && (e.preventDefault(), map.classList.contains("modal-show") && map.classList.remove("modal-show")) });